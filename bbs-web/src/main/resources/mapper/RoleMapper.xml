<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
        "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="cn.saymyname.dao.RoleMapper" >

    <select id = "pageQuery" resultType="role" parameterType="map">
        select * from t_role
        <where>
            <if test="queryText != null and queryText != '' ">
                and name like "%"#{queryText}"%"
            </if>
        </where>
        ORDER BY create_time DESC
        limit #{start},#{size}
    </select>

    <select id="pageQueryCount" resultType = "int" parameterType="map">
        select COUNT(*) from t_role
        <where>
            <if test="queryText != null">
                and name like "%"#{queryText}"%"
            </if>
        </where>
    </select>

    <insert id="insertRolePermission">
        insert INTO  t_role_permission (role_id,permission_id)
              VALUES
              <foreach collection="permissionIds" item="permissionId" separator=",">
                  (#{roleId},#{permissionId})
              </foreach>
    </insert>

    <delete id="deleteRolePermission">
        delete from t_role_permission where role_id = #{roleId}

    </delete>
</mapper>